#
# Install docker
#

- name: docker | install
  apt: 'pkg=docker.io state=latest'
  sudo: yes
  when: ansible_distribution != 'Debian'

# https://github.com/docker/docker/issues/4734
- name: docker | install useful packages
  apt: 'pkg={{ item }} state=latest'
  sudo: yes
  with_items:
    - apparmor
    - cgroup-lite
  when: ansible_distribution in ['Ubuntu', 'Linuxmint']

- name: docker | add users to docker group
  user: 'name={{ item }} groups=docker append=true'
  with_items: users.keys()
  sudo: yes
  when: ansible_distribution != 'Debian'
