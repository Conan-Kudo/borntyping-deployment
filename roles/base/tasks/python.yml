#
# Prepares a Python development environment
#

- name: install python packages
  apt: 'pkg={{ item }} state=latest'
  sudo: yes
  with_items:
    - python
    - python-pip
    - python-dev
    - python3
    - python3-pip
    - python3-dev

- name: install python modules
  pip: 'name={{ item }} state=latest executable=pip3'
  sudo: yes
  with_items:
    - pipsi

- name: deadsnakes | configure ppa
  command: apt-add-repository ppa:fkrull/deadsnakes
  args: {'creates': '/etc/apt/sources.list.d/fkrull-deadsnakes-trusty.list'}
  when: ansible_distribution in ['Ubuntu', 'Linuxmint']
  sudo: yes

- name: deadsnakes | install python2.6
  apt: 'pkg={{ item }} state=latest'
  when: ansible_distribution in ['Ubuntu', 'Linuxmint']
  sudo: yes
  with_items:
    - python2.6
    - python2.6-dev

- name: virtualenv | install packages
  apt: 'pkg={{ item }} state=latest'
  sudo: yes
  with_items:
    - python-virtualenv
    - virtualenvwrapper

- name: virtualenv | create scripts
  copy: src=postmkvirtualenv dest=~/.virtualenvs/postmkvirtualenv mode=0755
